<!DOCTYPE html>
<html lang="en">

<head>
	<title>Instagib</title>
	<meta charset=utf-8 />
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="main.css">
</head>

<body>
	<div id="player_setup">
		<img src="images/index.png"  usemap="#workmap" width="1280" height="720">
		<div style="position:absolute; left: 950px; top: 630px; width: 150px; height: 90px;z-index:1; cursor: pointer" onclick="document.forms.play.submit()">
		</div>
		<form action="game.html" name="play">
			<input type="text" name="name" style="position:absolute; left: 537px; top: 255px; width: 241px; height: 30px;z-index:1" autofocus>
			<input type="text" name="room" value="Test" style="position:absolute; left: 537px; top: 376px; width: 241px; height: 30px;z-index:1" list="rooms"/>
			<datalist id="rooms">
			</datalist>
			<input type="text" name="color" value="red" style="position:absolute; left: 537px; top: 497px; width: 241px; height: 30px;z-index:1">
		</form>
	</div>

	<script>
		function ac(type, father) {
			return father.appendChild(document.createElement(type));
		}
		fetch('./rooms').then(response => response.json()).then(data =>{
			console.log(data);
			var rooms = document.getElementById("rooms");
			data.forEach(d=>{
				var dlo = ac("option", rooms);
				dlo.value=d.name;
				dlo.innerText=d.name + " (" + d.player + " players)";
			});
		});
	</script>

</body>

</html>